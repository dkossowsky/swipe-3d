var __extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),__decorate=this&&this.__decorate||function(e,t,r,o){var n,s=arguments.length,a=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,o);else for(var c=e.length-1;0<=c;c--)(n=e[c])&&(a=(s<3?n(a):3<s?n(t,r,a):n(t,r))||a);return 3<s&&a&&Object.defineProperty(t,r,a),a};define(["require","exports","esri/core/tsSupport/declareExtendsHelper","esri/core/tsSupport/decorateHelper","esri/core/tsSupport/assignHelper","../context/Context","../context/Topic","../aiim/base/ItemReference","../utils/mapUtils","esri/core/accessorSupport/decorators"],function(e,t,r,o,n,i,u,s,a,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=function(t){function e(e){return t.call(this,e)||this}return r(e,t),e.prototype.getLabel=function(){return i.default.getInstance().i18n.yourPlaces.home},e.prototype.queryLocation=function(s){var a=this,e=i.default.getInstance(),t=e.user.isAnonymous(),r=e.aiim.datasets.people,c=e.aiim.datasets.units,o=null;!t&&r&&c&&r.queryAppUser().then(function(e){return e&&e.features&&1===e.features.length?(o=e.features[0],c.queryPersonUnit(o,r)):null}).then(function(e){if(e&&e.features&&1===e.features.length){var t=c.getSource(),r=e.features[0],o=t.makeSearchResult(null,r),n=a.fromSearchResult(t.key,o);n&&s&&a.setLevel(),n&&u.default.publish(u.default.HomeLocationSet,{homeLocation:a})}}).catch(function(e){console.warn("Error querying home location:"),console.error(e)})},e.prototype.setLevel=function(){if(this.isValid()&&this.searchResult){var e=i.default.getInstance().views.activeView,t=this.searchResult.feature;e&&t&&(a.goToFeature(e,t),i.default.getInstance().aiim.facilityMode.setFromHome(this,t,e))}},e=o([c.subclass("app.yourplaces.HomeLocation")],e)}(c.declared(s.default));t.default=l});