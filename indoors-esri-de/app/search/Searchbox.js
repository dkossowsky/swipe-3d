var __extends=this&&this.__extends||function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),__decorate=this&&this.__decorate||function(e,t,r,c){var o,s=arguments.length,i=s<3?t:null===c?c=Object.getOwnPropertyDescriptor(t,r):c;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,c);else for(var n=e.length-1;0<=n;n--)(o=e[n])&&(i=(s<3?o(i):3<s?o(t,r,i):o(t,r))||i);return 3<s&&i&&Object.defineProperty(t,r,i),i};define(["require","exports","esri/core/tsSupport/declareExtendsHelper","esri/core/tsSupport/decorateHelper","../context/Context","../context/Topic","esri/core/accessorSupport/decorators","esri/widgets/Widget","esri/widgets/support/widget","esri/widgets/Search"],function(e,t,r,c,s,i,n,o,a,u){"use strict";var l="i-searchbox";return function(o){function e(e){var t=o.call(this,e)||this;t._search=null;var r=t,c=s.default.getInstance();return c.views&&c.views.activeView&&t.init(c.views.activeView),t.own(i.default.subscribe(i.default.ViewActivated,function(e){r._search?r._search.view=e.view:(r.init(e.view),r.scheduleRender())})),t}return r(e,o),e.prototype.init=function(e){var r=this,c=s.default.getInstance(),t=c.aiim.datasets.categories.makeSearchSources();t&&0!==t.length&&(this._search=new u({view:e,allPlaceholder:c.i18n.search.allPlaceholder,sources:t,includeDefaultSources:!1,locationEnabled:!1}),this._search.on("select-result",function(e){var t=c.aiim.datasets.categories.findSourceByKey(e.source.aiimKey);if(t){i.default.publish(i.default.ShowSearchResult,{sourceKey:t.key,searchResult:e.result,zoom:!0,highlight:!0,trackRecent:!0});try{c.uiMode.isTouch&&r._search.blur()}catch(e){console.error("Searchbox - blur error:",e)}}else console.warn("Search - Unable to find AIIM source by name for:",e)}))},e.prototype.render=function(){return this._search?a.tsx("div",{key:"i-searchbox",class:l},this._search.render()):null},e=c([n.subclass("app.search.Searchbox")],e)}(n.declared(o))});