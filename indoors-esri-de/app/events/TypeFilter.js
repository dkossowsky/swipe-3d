var __extends=this&&this.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),__decorate=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,c=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;0<=s;s--)(o=e[s])&&(c=(i<3?o(c):3<i?o(t,n,c):o(t,n))||c);return 3<i&&c&&Object.defineProperty(t,n,c),c};define(["require","exports","esri/core/tsSupport/declareExtendsHelper","esri/core/tsSupport/decorateHelper","../context/Context","../common/ChoiceDropdown","esri/core/accessorSupport/decorators","esri/widgets/support/widget","esri/widgets/Widget"],function(e,t,r,o,i,n,c,s,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var p="i-events-typefilter",a=function(n){function e(e){var t=n.call(this,e)||this;return t.menuOptions=t.makeMenuOptions(),t}return r(e,n),e.prototype.beforeActivate=function(e){e&&this.queryTypes(e)},e.prototype.makeMenuOptions=function(){var e=i.default.getInstance().i18n,t=[{label:e.events.typeFilter.any,subcaption:e.events.typeFilter.any,value:null,checked:!0}];return this.selectedMenuOption=t[0],t},e.prototype.makeWhere=function(e,t){var n=this.getSelectedMenuOptionValue();return"string"==typeof n&&0<n.length?(n=n.replace("'","''"),"("+t.typeField+"='"+n+"')"):null},e.prototype.menuOptionClicked=function(e){this.dropdownIsActive=!1,e.checked||(this.checkMenuOption(e.value),this.selectedMenuOption=e,this.emit("changed",{}))},e.prototype.queryTypes=function(e){var r=this,o=this.getSelectedMenuOptionValue();e.queryTypes().then(function(e){var t=i.default.getInstance().i18n,n=[{label:t.events.typeFilter.any,subcaption:t.events.typeFilter.any,value:null,checked:!1}];e&&0<e.length&&e.forEach(function(e){n.push({label:e,subcaption:e,value:e,checked:!1})}),n.some(function(e){if(e.value===o)return e.checked=!0})||(n[0].checked=!0),r.menuOptions=n,r.scheduleRender()}).catch(function(e){console.error("Error querying event types",e)})},e.prototype.render=function(){var e=i.default.getInstance().i18n,t=p;return i.default.getInstance().uiMode.isIOS?t+=" i--fix":i.default.getInstance().uiMode.isKiosk&&(t+=" i--fix"),s.tsx("div",{key:"i-main",class:t},this.renderDropdownButton(e.events.typeFilter.caption),this.renderDropdownMenu())},e=o([c.subclass("app.events.TypeFilter")],e)}(c.declared(u,n.default));t.default=a});