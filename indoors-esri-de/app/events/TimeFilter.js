var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),__decorate=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;0<=s;s--)(o=e[s])&&(a=(i<3?o(a):3<i?o(t,r,a):o(t,r))||a);return 3<i&&a&&Object.defineProperty(t,r,a),a};define(["require","exports","esri/core/tsSupport/declareExtendsHelper","esri/core/tsSupport/decorateHelper","../context/Context","../common/ChoiceDropdown","../utils/dateUtil","esri/core/accessorSupport/decorators","esri/widgets/support/widget","esri/widgets/Widget","dojo/date/locale","dojo/date/stamp"],function(e,t,n,o,a,r,v,i,s,c,u,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var d="i-events-timefilter",p=function(r){function e(e){var t=r.call(this,e)||this;return t.menuOptions=t.makeMenuOptions(),t.disabled=!0,t}return n(e,r),e.prototype.beforeActivate=function(e){},e.prototype.makeMenuOptions=function(){var e=a.default.getInstance().i18n,t=[{label:e.events.timeFilter.any,subcaption:e.events.timeFilter.any,value:null,checked:!0}],r=l.fromISOString("T00:00:00");r.setFullYear(1970,0,1);for(var n=0;n<24;n++){var o=new Date(r.getTime());o.setHours(o.getHours()+n),o.setFullYear(1970,0,1);var i=u.format(o,{selector:"time"});t.push({label:i,subcaption:i,value:n,checked:!1})}return this.selectedMenuOption=t[0],t},e.prototype.makeWhere=function(e,t){if(e.refDate?this.disabled&&(this.disabled=!1):this.disabled||(this.disabled=!0),this.disabled)return null;var r=this.getSelectedMenuOptionValue();if("number"!=typeof r)return null;var n=null,o=r,i=24-o,a=t.dateStartField;t.dateEndField;if(a){var s=e.refDate;s||(s=new Date(Date.now()));var c=new Date(s.getTime());(c=v.toStartOfDay(c)).setHours(o);var u=c.getUTCHours(),l=0,d=Math.min(u+i,24),p=u+i-24;0<p?l=p:u<d&&d<24&&(l=d);var f="(EXTRACT(HOUR FROM "+a+") >= "+u+")",h=void 0;0<l&&(h="(EXTRACT(HOUR FROM "+a+") < "+l+")",f=u<l?"("+f+" AND "+h+")":"("+f+" OR "+h+")"),n=f}return n},e.prototype.menuOptionClicked=function(e){this.dropdownIsActive=!1,e.checked||(this.checkMenuOption(e.value),this.selectedMenuOption=e,this.emit("changed",{}))},e.prototype.render=function(){var e=a.default.getInstance().i18n;return s.tsx("div",{key:"i-main",class:d},this.renderDropdownButton(e.events.timeFilter.caption),this.renderDropdownMenu())},e=o([i.subclass("app.events.TimeFilter")],e)}(i.declared(c,r.default));t.default=p});