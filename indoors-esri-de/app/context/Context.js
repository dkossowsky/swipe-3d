define(["require","exports","../aiim/base/Aiim","./ConfigLoader","./Session","./UIMode","./User","dojo/text!../config/config.json","dojo/i18n!../nls/resources","dojo/text!../config/version.json"],function(i,t,e,o,s,r,f,c,h,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function n(){this.i18n=h,this.isKiosk=!1,this.supports3D=!0}return n.checkMixedContent=function(i){return"string"==typeof window.location.href&&0===window.location.href.indexOf("https://")&&"string"==typeof i&&0===i.indexOf("http://")&&(i="https:"+i.substring(5)),i},n.getInstance=function(){return this._instance||(this._instance=new this,this._instance.init()),this._instance},n.prototype.getSharingUrl=function(){return n.checkMixedContent(this.config.portalUrl+"/sharing")},n.prototype.init=function(){(this.versionInfo=JSON.parse(a),this.config=JSON.parse(c),this.uiMode=new r.default,this.uiMode.init(),this.isKiosk=this.uiMode.isKiosk,this.user=new f.default,this.session=new s.default,this.aiim=new e.default,"../.."===this.config.portalUrl)&&(0<(i=window.location.href.indexOf("/apps/"))&&(this.config.portalUrl=window.location.href.substring(0,i)));if(this.config.portalUrl=n.checkMixedContent(this.config.portalUrl),"string"==typeof this.config.networkServiceUrl){var i,t=this.config.networkServiceUrl;0<(i=t.lastIndexOf("/Route"))&&i===t.length-6&&(t=t.substring(0,i),this.config.networkServiceUrl=t)}},n.prototype.load=function(){return(new o.default).load(this)},n}();t.default=n});