define(["require","exports","esri/request","esri/core/promiseUtils","esri/core/urlUtils"],function(e,t,n,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){}return e.prototype.configure=function(){var e,t=function(e){return"string"==typeof e&&0<e.length},n=this.context.config,r=this.appConfigurationData,o=this.urlObject;r&&r.values&&(t((e=r.values).webmap)&&(n.webmap=e.webmap,n.webscene=null),t(e.webscene)&&(n.webscene=e.webscene));o&&o.query&&(t((e=o.query).webmap)&&(n.webmap=e.webmap,n.webscene=null),void 0!==e.webscene&&null!==e.webscene&&(n.webscene=null),t(e.webscene)&&(n.webscene=e.webscene));return i.resolve()},e.prototype.load=function(e){var t=this;return this.context=e,this.urlObject=r.urlToObject(window.location.href),this.readAppData().then(function(e){return t.configure()}).catch(function(e){console.warn("Error loading application configuration: "),console.error(e)})},e.prototype.readAppData=function(){var t,n=this;return this.urlObject&&this.urlObject.query&&(t=this.urlObject.query.appid),"string"==typeof t&&0<t.length?this.readItemJson(t).then(function(e){e&&e.data&&(n.appConfigurationData=e.data)}).catch(function(e){console.warn("Error loading application item configuration data: ",t),console.error(e)}):i.resolve()},e.prototype.readItemJson=function(e){var t=this.context.getSharingUrl();t+="/rest/content/items/"+encodeURIComponent(e)+"/data";return n(t,{query:{f:"json"},responseType:"json"})},e}();t.default=o});