var __extends=this&&this.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}(),__decorate=this&&this.__decorate||function(e,t,o,r){var s,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,r);else for(var u=e.length-1;0<=u;u--)(s=e[u])&&(i=(n<3?s(i):3<n?s(t,o,i):s(t,o))||i);return 3<n&&i&&Object.defineProperty(t,o,i),i};define(["require","exports","esri/core/tsSupport/assignHelper","esri/core/tsSupport/declareExtendsHelper","esri/core/tsSupport/decorateHelper","../RouteResult","../../aiim/util/aiimUtil","esri/core/accessorSupport/decorators","esri/widgets/Directions/DirectionsViewModel","esri/tasks/RouteTask","dojo/aspect"],function(e,t,o,r,s,n,i,u,c,p,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=function(t){function e(e){return t.call(this)||this}return r(e,t),Object.defineProperty(e.prototype,"_routeTask",{get:function(){return this.indoorsNewRouteTask()},enumerable:!0,configurable:!0}),e.prototype._addRouteToLayer=function(){if(this.indoorsRouteResult){var e=this.get("view"),t=this.get("_routeLayer");t.graphics.removeAll(),this.indoorsRouteResult.addRouteGraphics(e,t.graphics)}},e.prototype.zoomToRoute=function(){this.indoorsRouteResult&&this.indoorsRouteResult.goToRoute()},e.prototype.indoorsCheckStops=function(e){e.forEach(function(e){e.geometry&&"polygon"===e.geometry.type&&e.geometry.centroid&&(e.geometry=e.geometry.centroid,i.removeShapeAttributes(e.attributes))})},e.prototype.indoorsNewRouteTask=function(){var o=this,e=new p(this.get("routeServiceUrl"));e._dropZValuesOffInputGeometry=function(e,t){};a.before(e,"solve",function(e,t){return e.stops&&e.stops.features&&o.indoorsCheckStops(e.stops.features),[e,t]});return a.around(e,"_handleSolveResponse",function(t){return function(e){return o.indoorsRouteResult=new n.default({response:e,viewModel:o}),o.indoorsRouteResult.process(),t(e)}}),e},s([u.property({dependsOn:["routeServiceUrl"],type:p})],e.prototype,"_routeTask",null),s([u.property()],e.prototype,"zoomToRoute",null),e=s([u.subclass("app.route.core.CoreDirectionsViewModel")],e)}(u.declared(c));t.default=l});