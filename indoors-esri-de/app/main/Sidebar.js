var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),__decorate=this&&this.__decorate||function(e,t,i,n){var s,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;0<=r;r--)(s=e[r])&&(o=(a<3?s(o):3<a?s(t,i,o):s(t,i))||o);return 3<a&&o&&Object.defineProperty(t,i,o),o};define(["require","exports","esri/core/tsSupport/declareExtendsHelper","esri/core/tsSupport/decorateHelper","../context/Context","./About","../route/DirectionsPanel","../events/EventsPanel","../explore/Explore","../yourplaces/YourPlaces","../common/Icons","esri/core/accessorSupport/decorators","esri/widgets/support/widget","esri/widgets/Widget"],function(e,t,n,s,c,a,o,r,l,d,p,u,b,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var h="i-sidebar",v="i-sidebar-menus",f="i-sidebar-menu",m="i-sidebar-button",y="i-sidebar-button-active",g="i-sidebar-button-caption",x="i-sidebar-menu2",I="i-sidebar-button2",w="i-sidebar-panels",k="i-sidebar-panels-visible",C="i-sidebar-panel",_="i-sidebar-panel-visible",P="i-sidebar-panel-open",N="i-panel-header",O="i-panel-header-caption",S="i-panel-header-tools",E="i-button-expand i-icon-button",j="i-button-close i-icon-button",D="i-expanded",B="i-upper",A="i-sidebar-icon-container",M=function(i){function e(e){var t=i.call(this)||this;return t.makeItems(),t}return n(e,i),e.prototype.destroy=function(){},e.prototype.buttonClicked=function(e){e&&(e===this.activeItem?this.deactivateItem(e):(this.activeItem&&(this.activeItem.panel.widget&&"function"==typeof this.activeItem.panel.widget.beforeDeactivate&&this.activeItem.panel.widget.beforeDeactivate(),this.activeItem.button.active=!1,this.activeItem.panel.visible=!1),e.panel.widget&&"function"==typeof e.panel.widget.beforeActivate&&e.panel.widget.beforeActivate(),e.button.active=!0,e.panel.visible=!0,this.activeItem=e,document.body.classList.add(P)))},e.prototype.deactivateItem=function(e){e&&e===this.activeItem&&(e.panel.widget&&"function"==typeof e.panel.widget.beforeDeactivate&&e.panel.widget.beforeDeactivate(),e.button.active=!1,e.panel.visible=!1,this.activeItem=null,document.body.classList.remove(P))},e.prototype.makeItems=function(){var t=this,e=c.default.getInstance().i18n;this.exploreItem=new R({button:new H({caption:e.explore.caption,iconClassName:"globe-16-f",sidebar:this}),panel:new q({caption:e.explore.caption,sidebar:this,widget:new l.default})}),this.yourPlacesItem=new R({button:new H({caption:e.yourPlaces.caption,iconClassName:"pin-16-f",liClassName:"i-non-kiosk-only",sidebar:this}),panel:new q({caption:e.yourPlaces.caption,sidebar:this,widget:new d.default})}),this.directionsItem=new R({button:new H({caption:e.directions.caption,iconClassName:"right-16-f",sidebar:this}),panel:new q({caption:e.directions.caption,sidebar:this,widget:new o.default})}),this.eventsItem=new R({button:new H({caption:e.events.caption,iconClassName:"calendar-16-f",liClassName:"i-sidebar-button--events",sidebar:this}),panel:new q({caption:e.events.caption,sidebar:this,widget:new r.default})}),this.about=new a.default({}),this.aboutButton=new L({tooltip:e.about.caption,iconClassName:"information-16-f",sidebar:this}),this.aboutButton.on("clicked",function(e){c.default.getInstance().layout.modal.content=t.about})},e.prototype.render=function(){var e,t=c.default.getInstance().uiMode.expanded,i=((e={})[k]=!!this.activeItem,e[D]=!!this.activeItem&&t,e),n=null,s=null,a=c.default.getInstance().aiim.datasets.events;return a&&a.url&&a.getSource()&&(n=this.eventsItem.button.render(),s=this.eventsItem.panel.render()),b.tsx("div",{key:"i-sidebar",class:h,role:"navigation"},b.tsx("div",{key:"i-sidebar-menus",class:v},b.tsx("ul",{key:"i-sidebar-menu",class:f},this.exploreItem.button.render(),this.yourPlacesItem.button.render(),this.directionsItem.button.render(),n),b.tsx("ul",{key:"i-sidebar-menu2",class:x},this.aboutButton.render())),b.tsx("div",{key:"i-sidebar-panels",class:w,classes:i},this.exploreItem.panel.render(),this.yourPlacesItem.panel.render(),this.directionsItem.panel.render(),s))},s([u.property(),b.renderable()],e.prototype,"activeItem",void 0),e=s([u.subclass("app.main.Sidebar")],e)}(u.declared(i));t.default=M;var R=function(e){e&&(this.button=e.button,this.panel=e.panel),this.button&&(this.button.sidebarItem=this),this.panel&&(this.panel.sidebarItem=this)},H=function(i){function e(e){var t=i.call(this)||this;return t.active=!1,t}return n(e,i),e.prototype.clicked=function(){this.sidebar&&this.sidebarItem&&this.sidebar.buttonClicked(this.sidebarItem)},e.prototype.render=function(){var e=((t={})[y]=this.active,t);this.liClassName&&(e[this.liClassName]=!0);var t,i="libs/calcite-ui-icons/icons/sprite-16.svg#"+this.iconClassName;return b.tsx("li",{classes:e},b.tsx("a",{bind:this,class:m,href:"#",onclick:this.clicked,role:"button"},b.tsx("span",{class:A},b.tsx("svg",{class:"icon"},b.tsx("use",{href:i}))),b.tsx("div",{class:g},this.caption)))},s([u.property(),b.renderable()],e.prototype,"active",void 0),s([u.property(),b.renderable()],e.prototype,"caption",void 0),s([u.property()],e.prototype,"iconClassName",void 0),s([u.property()],e.prototype,"liClassName",void 0),e=s([u.subclass("app.main.SidebarButton")],e)}(u.declared(i)),L=function(i){function e(e){var t=i.call(this)||this;return t.tooltip="",t}return n(e,i),e.prototype.clicked=function(){this.emit("clicked",{})},e.prototype.render=function(){var e="libs/calcite-ui-icons/icons/sprite-16.svg#"+this.iconClassName;return b.tsx("li",null,b.tsx("a",{bind:this,class:I,href:"#",onclick:this.clicked,role:"button",title:this.tooltip},b.tsx("svg",{class:"icon"},b.tsx("use",{href:e}))))},s([u.property(),b.renderable()],e.prototype,"tooltip",void 0),s([u.property()],e.prototype,"iconClassName",void 0),e=s([u.subclass("app.main.SidebarButton2")],e)}(u.declared(i)),q=function(i){function e(e){var t=i.call(this)||this;return t.visible=!1,t}return n(e,i),e.prototype.hide=function(){this.sidebar&&this.sidebarItem&&this.sidebar.deactivateItem(this.sidebarItem)},e.prototype.render=function(){if(!this.visible)return null;var e,t=c.default.getInstance().i18n,i=((e={})[_]=this.visible,e),n=c.default.getInstance().uiMode.expanded,s=n?p.default.panelCollapse():p.default.panelExpand(),a=n?t.general.collapse:t.general.expand,o=null,r=null;return this.widget&&("function"==typeof this.widget.renderPanelCaption?o=this.widget.renderPanelCaption():this.caption&&(o=b.tsx("span",{class:B},this.caption)),r=this.widget.render()),b.tsx("div",{bind:this,class:C,classes:i},b.tsx("header",{key:"header-k1",class:N},b.tsx("div",{key:"header-k2",class:O},o),b.tsx("div",{key:"header-k3",class:S},b.tsx("a",{key:"header-k4",href:"#",class:E,role:"button",title:a,bind:this,onclick:this.toggleExpanded},s),b.tsx("a",{key:"header-k5",href:"#",class:j,role:"button",title:t.general.close,bind:this,onclick:this.hide},p.default.close()))),r)},e.prototype.toggleExpanded=function(){c.default.getInstance().uiMode.toggleExpanded()},s([u.property(),b.renderable()],e.prototype,"caption",void 0),s([u.property(),b.renderable()],e.prototype,"visible",void 0),s([u.property()],e.prototype,"widget",void 0),e=s([u.subclass("app.main.SidebarPanel")],e)}(u.declared(i))});