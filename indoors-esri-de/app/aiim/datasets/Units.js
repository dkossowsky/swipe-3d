var __extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),__decorate=this&&this.__decorate||function(e,t,r,o){var i,n=arguments.length,s=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,o);else for(var u=e.length-1;0<=u;u--)(i=e[u])&&(s=(n<3?i(s):3<n?i(t,r,s):i(t,r))||s);return 3<n&&s&&Object.defineProperty(t,r,s),s};define(["require","exports","esri/core/tsSupport/declareExtendsHelper","esri/core/tsSupport/decorateHelper","esri/core/tsSupport/assignHelper","../../context/Context","./Dataset","./FieldNames","../util/searchUtil","esri/tasks/support/Query","esri/tasks/QueryTask","esri/core/accessorSupport/decorators","esri/core/promiseUtils"],function(e,t,o,i,r,n,s,u,c,a,p,l,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var f=function(r){function e(e){var t=r.call(this,e)||this;return t.type="feature",t.uidField=u.default.UNIT_ID,t.requiresFacilityMode=!0,t}return o(e,r),e.prototype.checkSchema=function(){var o=this;return d.create(function(e,t){if(o.layer2D){var r=o.layer2D;r.when(function(){o.checkFieldNameProperty("uidField",r.fields),e()})}else e()})},e.prototype.getSource=function(){return n.default.getInstance().aiim.datasets.categories.findSourceByKey("Units")},e.prototype.queryByGeometry=function(e,t){if(!this.url)return d.resolve();var r=n.default.checkMixedContent(this.url),o=new p({url:r}),i=new a;return i.outFields=["*"],i.returnGeometry=!0,i.returnZ=!0,i.where="1=1",i.geometry=e,"number"==typeof t&&0<t&&(i.distance=t,i.units="meters"),o.execute(i)},e.prototype.queryPersonUnit=function(e,t){if(!e||!t)return d.resolve();var r=this.getSource(),o=t.getUnitID(e);return c.queryFieldValue(r,this.url,this.uidField,o)},i([l.property()],e.prototype,"type",void 0),i([l.property()],e.prototype,"uidField",void 0),e=i([l.subclass("app.aiim.datasets.Units")],e)}(l.declared(s.default));t.default=f});