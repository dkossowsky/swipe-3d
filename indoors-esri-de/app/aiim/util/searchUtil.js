define(["require","exports","../../context/Context","esri/tasks/support/Query","esri/tasks/QueryTask","esri/core/promiseUtils"],function(e,t,l,c,f,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.queryFieldValue=function(r,n,e,t,i){if(void 0===typeof t||null===t)return p.resolve(null);n=l.default.checkMixedContent(n);var u=new f({url:n}),o=new c;o.outFields=["*"];var s=l.default.getInstance().views.mapView;s&&(o.outSpatialReference=s.spatialReference),o.returnGeometry=!0,o.returnZ=!0,o.multipatchOption="xyFootprint",i?o.objectIds=[t]:"string"==typeof e&&"objectid"===e.toLowerCase()?o.where=e+" = "+t:"string"==typeof t?(t=t.replace("'","''"),o.where=e+" = '"+t+"'"):o.where=e+" = "+t;var a=u.execute(o);return a.then(function(e){if(e&&e.features&&1===e.features.length){var t=e.features[0];t.xtnFields=e.fields,t.xtnSourceUrl=n,t.xtnSource=r}}),a}});